<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="834px" preserveAspectRatio="none" style="width:821px;height:834px;" version="1.1" viewBox="0 0 821 834" width="821px" zoomAndPan="magnify"><defs><filter height="300%" id="f1i1mqnin4mktc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="36" x="394.5" y="16.708">类图</text><!--class Builder--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="60.8047" id="Builder" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="721" y="419.4531"/><ellipse cx="736" cy="435.4531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M736.9531,432.2344 L736.9531,438.75 L738.6719,438.75 C739.125,438.75 739.2656,438.7813 739.4375,438.9063 C739.6719,439.0781 739.7813,439.3281 739.7813,439.6094 C739.7813,440.1719 739.4219,440.4531 738.6719,440.4531 L733.5313,440.4531 C733.125,440.4531 732.9219,440.4063 732.7656,440.2813 C732.5469,440.125 732.4063,439.8594 732.4063,439.6094 C732.4063,439.3125 732.5625,439.0313 732.8125,438.875 C732.9688,438.7656 733.0938,438.75 733.5313,438.75 L735.25,438.75 L735.25,432.2344 L733.5313,432.2344 C733.1094,432.2344 732.9219,432.2031 732.7656,432.0938 C732.5469,431.9219 732.4063,431.6719 732.4063,431.3906 C732.4063,431.1094 732.5625,430.8125 732.8125,430.6563 C732.9688,430.5625 733.0938,430.5469 733.5313,430.5469 L738.6719,430.5469 C739.125,430.5469 739.2656,430.5781 739.4375,430.6875 C739.6719,430.8594 739.7813,431.125 739.7813,431.3906 C739.7813,431.6875 739.6406,431.9688 739.375,432.125 C739.25,432.2031 739.0625,432.2344 738.6719,432.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="43" x="750" y="439.6074">Builder</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="9" x="801" y="416.4531"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="7" x="802" y="428.5918">T</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="722" x2="806" y1="451.4531" y2="451.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="722" x2="806" y1="459.4531" y2="459.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="727" y="473.6636">T build();</text><!--class Configuration--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="48" id="Configuration" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="314" y="298.9531"/><ellipse cx="329" cy="314.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M329.9531,311.7344 L329.9531,318.25 L331.6719,318.25 C332.125,318.25 332.2656,318.2813 332.4375,318.4063 C332.6719,318.5781 332.7813,318.8281 332.7813,319.1094 C332.7813,319.6719 332.4219,319.9531 331.6719,319.9531 L326.5313,319.9531 C326.125,319.9531 325.9219,319.9063 325.7656,319.7813 C325.5469,319.625 325.4063,319.3594 325.4063,319.1094 C325.4063,318.8125 325.5625,318.5313 325.8125,318.375 C325.9688,318.2656 326.0938,318.25 326.5313,318.25 L328.25,318.25 L328.25,311.7344 L326.5313,311.7344 C326.1094,311.7344 325.9219,311.7031 325.7656,311.5938 C325.5469,311.4219 325.4063,311.1719 325.4063,310.8906 C325.4063,310.6094 325.5625,310.3125 325.8125,310.1563 C325.9688,310.0625 326.0938,310.0469 326.5313,310.0469 L331.6719,310.0469 C332.125,310.0469 332.2656,310.0781 332.4375,310.1875 C332.6719,310.3594 332.7813,310.625 332.7813,310.8906 C332.7813,311.1875 332.6406,311.4688 332.375,311.625 C332.25,311.7031 332.0625,311.7344 331.6719,311.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="343" y="319.1074">Configuration</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="315" x2="429" y1="330.9531" y2="330.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="315" x2="429" y1="338.9531" y2="338.9531"/><!--class AbstractConfiguration--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="159.2422" id="AbstractConfiguration" style="stroke: #A80036; stroke-width: 1.5;" width="334" x="6" y="69.4531"/><ellipse cx="100.75" cy="85.4531" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M102.3281,87.2656 L98.2813,87.2656 L97.8906,88.25 L98.2813,88.25 C98.7344,88.25 98.875,88.2813 99.0469,88.4063 C99.2656,88.5781 99.3906,88.8281 99.3906,89.1094 C99.3906,89.3906 99.25,89.6875 98.9844,89.8281 C98.8594,89.9219 98.6406,89.9531 98.2813,89.9531 L96.0156,89.9531 C95.2656,89.9531 94.8906,89.6719 94.8906,89.1094 C94.8906,88.8125 95.0469,88.5313 95.2969,88.375 C95.4531,88.2656 95.6094,88.25 96.0313,88.25 L98.6719,81.7344 L97.5938,81.7344 C97.1563,81.7344 96.9844,81.7031 96.8125,81.5938 C96.5938,81.4219 96.4531,81.1719 96.4531,80.8906 C96.4531,80.6094 96.6094,80.3281 96.8594,80.1563 C97.0156,80.0625 97.1406,80.0469 97.5938,80.0469 L101.2656,80.0469 L104.6563,88.25 C105.125,88.25 105.2813,88.2813 105.4531,88.4219 C105.6719,88.5781 105.8125,88.8281 105.8125,89.1094 C105.8125,89.3906 105.6563,89.6875 105.4063,89.8281 C105.2656,89.9219 105.0469,89.9531 104.6875,89.9531 L102.3281,89.9531 C101.9063,89.9531 101.7031,89.9063 101.5625,89.7813 C101.3438,89.625 101.2031,89.375 101.2031,89.1094 C101.2031,88.8125 101.3594,88.5313 101.6094,88.375 C101.7656,88.2656 101.875,88.25 102.3281,88.25 L102.7188,88.25 Z M101.625,85.5625 L100.2969,82.2969 L98.9531,85.5625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="136" x="121.25" y="89.6074">AbstractConfiguration</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="339" y1="101.4531" y2="101.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="110.3555"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="308" x="26" y="115.6636">ConcurrentMap&lt;String, LoggerConfig&gt; loggerConfigs;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="123.1602"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="26" y="128.4683">final WeakReference&lt;LoggerContext&gt; loggerContext;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="135.9648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="26" y="141.2729">final WatchManager watchManager;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="148.7695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="266" x="26" y="154.0776">final ConfigurationSource configurationSource;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="178.3789"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="26" y="183.687">ConcurrentMap&lt;String, Appender&gt; appenders;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="191.1836"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="26" y="196.4917">final ConcurrentMap&lt;String, String&gt; properties</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="203.9883"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="26" y="209.2964">final StrLookup tempLookup;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="216.793"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="26" y="222.1011">final StrSubstitutor subst;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="7" x2="156.5" y1="167.0742" y2="167.0742"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="156.5" y="170.3823">子组件</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="189.5" x2="339" y1="167.0742" y2="167.0742"/><!--class BuiltConfiguration--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="146.4375" id="BuiltConfiguration" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="52" y="376.9531"/><ellipse cx="113.25" cy="392.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M115.5938,388.625 L115.7656,388.7031 C115.9844,388.3906 116.1875,388.2969 116.4844,388.2969 C116.7813,388.2969 117.0625,388.4375 117.2188,388.7031 C117.3125,388.8594 117.3281,388.9844 117.3281,389.4219 L117.3281,390.8438 C117.3281,391.2656 117.2969,391.4531 117.1875,391.6094 C117.0156,391.8281 116.75,391.9688 116.4844,391.9688 C116.2656,391.9688 116.0313,391.8594 115.8906,391.7188 C115.75,391.5938 115.7188,391.4688 115.6563,391.0625 C115.5625,390.6563 115.3906,390.4375 114.9063,390.1563 C114.4375,389.9063 113.8281,389.75 113.25,389.75 C111.5156,389.75 110.2656,391.0625 110.2656,392.8438 L110.2656,393.9375 C110.2656,395.6406 111.5625,396.7344 113.6094,396.7344 C114.375,396.7344 115.0625,396.6094 115.4844,396.3438 C115.6719,396.25 115.6719,396.25 116.125,395.7656 C116.3125,395.5781 116.5156,395.5 116.7344,395.5 C117.2031,395.5 117.5938,395.8906 117.5938,396.3438 C117.5938,396.7344 117.2656,397.1875 116.6875,397.5938 C115.9375,398.1406 114.7813,398.4375 113.5625,398.4375 C110.6719,398.4375 108.5625,396.5469 108.5625,393.9688 L108.5625,392.8438 C108.5625,390.125 110.5625,388.0469 113.1875,388.0469 C114.0625,388.0469 114.6563,388.1875 115.5938,388.625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="133.75" y="397.1074">BuiltConfiguration</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="53" x2="293" y1="408.9531" y2="408.9531"/><polygon fill="none" points="63,432.6602,67,436.6602,63,440.6602,59,436.6602" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="72" y="439.9683">Component rootComponent;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="60" y="447.4648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="72" y="452.7729">Component loggersComponent;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="60" y="460.2695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="199" x="72" y="465.5776">Component appendersComponent;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="60" y="473.0742"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="72" y="478.3823">Component filtersComponent;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="60" y="485.8789"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="72" y="491.187">Component propertiesComponent;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="60" y="498.6836"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="216" x="72" y="503.9917">Component customLevelsComponent;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="60" y="511.4883"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="72" y="516.7964">Component scriptsComponent;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="53" x2="129" y1="423.3555" y2="423.3555"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="129" y="426.6636">配置中的各项组件</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="217" x2="293" y1="423.3555" y2="423.3555"/><!--class PropertiesConfiguration--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="48" id="PropertiesConfiguration" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="82.5" y="618.9531"/><ellipse cx="97.5" cy="634.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M99.8438,630.625 L100.0156,630.7031 C100.2344,630.3906 100.4375,630.2969 100.7344,630.2969 C101.0313,630.2969 101.3125,630.4375 101.4688,630.7031 C101.5625,630.8594 101.5781,630.9844 101.5781,631.4219 L101.5781,632.8438 C101.5781,633.2656 101.5469,633.4531 101.4375,633.6094 C101.2656,633.8281 101,633.9688 100.7344,633.9688 C100.5156,633.9688 100.2813,633.8594 100.1406,633.7188 C100,633.5938 99.9688,633.4688 99.9063,633.0625 C99.8125,632.6563 99.6406,632.4375 99.1563,632.1563 C98.6875,631.9063 98.0781,631.75 97.5,631.75 C95.7656,631.75 94.5156,633.0625 94.5156,634.8438 L94.5156,635.9375 C94.5156,637.6406 95.8125,638.7344 97.8594,638.7344 C98.625,638.7344 99.3125,638.6094 99.7344,638.3438 C99.9219,638.25 99.9219,638.25 100.375,637.7656 C100.5625,637.5781 100.7656,637.5 100.9844,637.5 C101.4531,637.5 101.8438,637.8906 101.8438,638.3438 C101.8438,638.7344 101.5156,639.1875 100.9375,639.5938 C100.1875,640.1406 99.0313,640.4375 97.8125,640.4375 C94.9219,640.4375 92.8125,638.5469 92.8125,635.9688 L92.8125,634.8438 C92.8125,632.125 94.8125,630.0469 97.4375,630.0469 C98.3125,630.0469 98.9063,630.1875 99.8438,630.625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="111.5" y="639.1074">PropertiesConfiguration</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="83.5" x2="262.5" y1="650.9531" y2="650.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="83.5" x2="262.5" y1="658.9531" y2="658.9531"/><!--class ConfigurationBuilder--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="73.6094" id="ConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.5;" width="328" x="330" y="412.9531"/><ellipse cx="426.25" cy="428.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M427.2031,425.7344 L427.2031,432.25 L428.9219,432.25 C429.375,432.25 429.5156,432.2813 429.6875,432.4063 C429.9219,432.5781 430.0313,432.8281 430.0313,433.1094 C430.0313,433.6719 429.6719,433.9531 428.9219,433.9531 L423.7813,433.9531 C423.375,433.9531 423.1719,433.9063 423.0156,433.7813 C422.7969,433.625 422.6563,433.3594 422.6563,433.1094 C422.6563,432.8125 422.8125,432.5313 423.0625,432.375 C423.2188,432.2656 423.3438,432.25 423.7813,432.25 L425.5,432.25 L425.5,425.7344 L423.7813,425.7344 C423.3594,425.7344 423.1719,425.7031 423.0156,425.5938 C422.7969,425.4219 422.6563,425.1719 422.6563,424.8906 C422.6563,424.6094 422.8125,424.3125 423.0625,424.1563 C423.2188,424.0625 423.3438,424.0469 423.7813,424.0469 L428.9219,424.0469 C429.375,424.0469 429.5156,424.0781 429.6875,424.1875 C429.9219,424.3594 430.0313,424.625 430.0313,424.8906 C430.0313,425.1875 429.8906,425.4688 429.625,425.625 C429.5,425.7031 429.3125,425.7344 428.9219,425.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="127" x="446.75" y="433.1074">ConfigurationBuilder</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="331" x2="657" y1="444.9531" y2="444.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="331" x2="657" y1="452.9531" y2="452.9531"/><ellipse cx="341" cy="464.8555" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="302" x="350" y="467.1636">ConfigurationBuilder&lt;T&gt; add(XxxComponentBuilder);</text><ellipse cx="341" cy="477.6602" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="350" y="479.9683">Configuration build(boolean);</text><!--class DefaultConfigurationBuilder--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="240.0703" id="DefaultConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.5;" width="406" x="375" y="28.9531"/><ellipse cx="487.75" cy="44.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M490.0938,40.625 L490.2656,40.7031 C490.4844,40.3906 490.6875,40.2969 490.9844,40.2969 C491.2813,40.2969 491.5625,40.4375 491.7188,40.7031 C491.8125,40.8594 491.8281,40.9844 491.8281,41.4219 L491.8281,42.8438 C491.8281,43.2656 491.7969,43.4531 491.6875,43.6094 C491.5156,43.8281 491.25,43.9688 490.9844,43.9688 C490.7656,43.9688 490.5313,43.8594 490.3906,43.7188 C490.25,43.5938 490.2188,43.4688 490.1563,43.0625 C490.0625,42.6563 489.8906,42.4375 489.4063,42.1563 C488.9375,41.9063 488.3281,41.75 487.75,41.75 C486.0156,41.75 484.7656,43.0625 484.7656,44.8438 L484.7656,45.9375 C484.7656,47.6406 486.0625,48.7344 488.1094,48.7344 C488.875,48.7344 489.5625,48.6094 489.9844,48.3438 C490.1719,48.25 490.1719,48.25 490.625,47.7656 C490.8125,47.5781 491.0156,47.5 491.2344,47.5 C491.7031,47.5 492.0938,47.8906 492.0938,48.3438 C492.0938,48.7344 491.7656,49.1875 491.1875,49.5938 C490.4375,50.1406 489.2813,50.4375 488.0625,50.4375 C485.1719,50.4375 483.0625,48.5469 483.0625,45.9688 L483.0625,44.8438 C483.0625,42.125 485.0625,40.0469 487.6875,40.0469 C488.5625,40.0469 489.1563,40.1875 490.0938,40.625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="508.25" y="49.1074">DefaultConfigurationBuilder</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="376" x2="780" y1="60.9531" y2="60.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="69.8555"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="395" y="75.1636">Class&lt;T&gt; clazz;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="82.6602"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="395" y="87.9683">ConfigurationSource source;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="95.4648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="395" y="100.7729">int monitorInterval;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="108.2695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="395" y="113.5776">Level level;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="121.0742"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="395" y="126.3823">LoggerContext loggerContext;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="133.8789"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="395" y="139.187">String name;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="146.6836"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="395" y="151.9917">Component root = new Component();</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="176.293"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="395" y="181.6011">Component loggers;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="189.0977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="395" y="194.4058">Component appenders;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="201.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="395" y="207.2104">Component filters;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="383" y="214.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="395" y="220.0151">Component properties;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="399" y="232.8198"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="376" x2="542.5" y1="164.9883" y2="164.9883"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="542.5" y="168.2964">root 的子组件</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="613.5" x2="780" y1="164.9883" y2="164.9883"/><polygon fill="#FFFF44" points="386,255.1211,390,259.1211,386,263.1211,382,259.1211" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="380" x="395" y="262.4292">ConfigurationBuilder&lt;T&gt; add(Component, ComponentBuilder&lt;?&gt;);</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="376" x2="506.5" y1="245.8164" y2="245.8164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="506.5" y="249.1245">向父组件添加子组件通用方法</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="649.5" x2="780" y1="245.8164" y2="245.8164"/><!--class PropertiesConfigurationBuilder--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="86.4141" id="PropertiesConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.5;" width="342" x="326" y="599.9531"/><ellipse cx="396.75" cy="615.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M399.0938,611.625 L399.2656,611.7031 C399.4844,611.3906 399.6875,611.2969 399.9844,611.2969 C400.2813,611.2969 400.5625,611.4375 400.7188,611.7031 C400.8125,611.8594 400.8281,611.9844 400.8281,612.4219 L400.8281,613.8438 C400.8281,614.2656 400.7969,614.4531 400.6875,614.6094 C400.5156,614.8281 400.25,614.9688 399.9844,614.9688 C399.7656,614.9688 399.5313,614.8594 399.3906,614.7188 C399.25,614.5938 399.2188,614.4688 399.1563,614.0625 C399.0625,613.6563 398.8906,613.4375 398.4063,613.1563 C397.9375,612.9063 397.3281,612.75 396.75,612.75 C395.0156,612.75 393.7656,614.0625 393.7656,615.8438 L393.7656,616.9375 C393.7656,618.6406 395.0625,619.7344 397.1094,619.7344 C397.875,619.7344 398.5625,619.6094 398.9844,619.3438 C399.1719,619.25 399.1719,619.25 399.625,618.7656 C399.8125,618.5781 400.0156,618.5 400.2344,618.5 C400.7031,618.5 401.0938,618.8906 401.0938,619.3438 C401.0938,619.7344 400.7656,620.1875 400.1875,620.5938 C399.4375,621.1406 398.2813,621.4375 397.0625,621.4375 C394.1719,621.4375 392.0625,619.5469 392.0625,616.9688 L392.0625,615.8438 C392.0625,613.125 394.0625,611.0469 396.6875,611.0469 C397.5625,611.0469 398.1563,611.1875 399.0938,611.625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="417.25" y="620.1074">PropertiesConfigurationBuilder</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="667" y1="631.9531" y2="631.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="334" y="640.8555"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="316" x="346" y="646.1636">ConfigurationBuilder&lt;PropertiesConfiguration&gt; builder;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="667" y1="652.7578" y2="652.7578"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="334" y="661.6602"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="346" y="666.9683">XxxComponentBuilder createXxx(Properties);</text><ellipse cx="337" cy="677.4648" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="346" y="679.7729">PropertiesConfiguration build();</text><!--class PropertiesConfigurationFactory--><rect fill="#FEFECE" filter="url(#f1i1mqnin4mktc)" height="60.8047" id="PropertiesConfigurationFactory" style="stroke: #A80036; stroke-width: 1.5;" width="477" x="258.5" y="762.9531"/><ellipse cx="395.25" cy="778.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M397.5938,774.625 L397.7656,774.7031 C397.9844,774.3906 398.1875,774.2969 398.4844,774.2969 C398.7813,774.2969 399.0625,774.4375 399.2188,774.7031 C399.3125,774.8594 399.3281,774.9844 399.3281,775.4219 L399.3281,776.8438 C399.3281,777.2656 399.2969,777.4531 399.1875,777.6094 C399.0156,777.8281 398.75,777.9688 398.4844,777.9688 C398.2656,777.9688 398.0313,777.8594 397.8906,777.7188 C397.75,777.5938 397.7188,777.4688 397.6563,777.0625 C397.5625,776.6563 397.3906,776.4375 396.9063,776.1563 C396.4375,775.9063 395.8281,775.75 395.25,775.75 C393.5156,775.75 392.2656,777.0625 392.2656,778.8438 L392.2656,779.9375 C392.2656,781.6406 393.5625,782.7344 395.6094,782.7344 C396.375,782.7344 397.0625,782.6094 397.4844,782.3438 C397.6719,782.25 397.6719,782.25 398.125,781.7656 C398.3125,781.5781 398.5156,781.5 398.7344,781.5 C399.2031,781.5 399.5938,781.8906 399.5938,782.3438 C399.5938,782.7344 399.2656,783.1875 398.6875,783.5938 C397.9375,784.1406 396.7813,784.4375 395.5625,784.4375 C392.6719,784.4375 390.5625,782.5469 390.5625,779.9688 L390.5625,778.8438 C390.5625,776.125 392.5625,774.0469 395.1875,774.0469 C396.0625,774.0469 396.6563,774.1875 397.5938,774.625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="415.75" y="783.1074">PropertiesConfigurationFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="259.5" x2="734.5" y1="794.9531" y2="794.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="259.5" x2="734.5" y1="802.9531" y2="802.9531"/><ellipse cx="269.5" cy="814.8555" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="451" x="278.5" y="817.1636">PropertiesConfiguration getConfiguration(LoggerContext, ConfigurationSource);</text><!--link ConfigurationBuilder to Builder--><path d="M658.064,449.9531 C673.029,449.9531 687.494,449.9531 700.675,449.9531 " fill="none" id="ConfigurationBuilder-Builder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="700.857,442.9531,720.857,449.9531,700.857,456.9531,700.857,442.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="676.5" y="443.02">继承</text><!--link Builder to PropertiesConfigurationBuilder--><path d="M713.125,493.4261 C700.813,503.3351 687.574,513.6931 675,522.9531 C638.782,549.6241 597.035,577.6681 563.078,599.8281 " fill="none" id="Builder-PropertiesConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="708.714,487.9901,728.641,480.7861,717.556,498.8451,708.714,487.9901" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="633" y="566.02">实现</text><!--link DefaultConfigurationBuilder to ConfigurationBuilder--><path d="M544.56,268.9851 C532.53,311.8031 519.523,358.1031 509.714,393.0181 " fill="none" id="DefaultConfigurationBuilder-ConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="516.348,395.2881,504.199,412.6491,502.869,391.5011,516.348,395.2881" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="537" y="327.52">实现</text><!--link Configuration to ConfigurationBuilder--><path d="M394.661,347.1721 C409.988,362.8751 430.746,384.1431 449.323,403.1771 " fill="none" id="Configuration-ConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="458.515,412.5961,457.1866,405.5084,450.1332,404.0086,451.4616,411.0963,458.515,412.5961" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="385.56" y="375.922">build()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="391.2096" y="366.9867">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="443.7285" y="401.9982">1</text><!--link AbstractConfiguration to Configuration--><path d="M264.055,228.6541 C286.967,248.4571 310.481,268.7811 329.689,285.3831 " fill="none" id="AbstractConfiguration-Configuration" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="334.466,280.2591,345.02,298.6331,325.311,290.8511,334.466,280.2591" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="277.476" y="259.658">实现</text><!--link AbstractConfiguration to BuiltConfiguration--><path d="M173,248.5141 C173,290.3891 173,338.3201 173,376.8091 " fill="none" id="AbstractConfiguration-BuiltConfiguration" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="166,248.5121,173,228.5121,180,248.5121,166,248.5121" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="174" y="327.52">继承</text><!--link BuiltConfiguration to PropertiesConfiguration--><path d="M173,543.3071 C173,571.2481 173,599.5491 173,618.6281 " fill="none" id="BuiltConfiguration-PropertiesConfiguration" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="166,543.1621,173,523.1621,180,543.1621,166,543.1621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="174" y="566.02">继承</text><!--link ConfigurationBuilder to PropertiesConfigurationBuilder--><path d="M494.571,487.3281 C495.012,515.3611 495.628,554.6001 496.13,586.5351 " fill="none" id="ConfigurationBuilder-PropertiesConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="496.337,599.7191,500.2422,593.657,496.1484,587.7206,492.2432,593.7827,496.337,599.7191" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="497" y="566.02">包含</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="486.0245" y="506.5887">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="487.623" y="588.9958">1</text><!--link PropertiesConfiguration to PropertiesConfigurationBuilder--><path d="M263.683,642.9531 C279.198,642.9531 295.803,642.9531 312.739,642.9531 " fill="none" id="PropertiesConfiguration-PropertiesConfigurationBuilder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="325.742,642.9531,319.742,638.9531,313.742,642.9531,319.742,646.9531,325.742,642.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="281.75" y="636.02">创建</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="271.5239" y="639.4044">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="309.8006" y="639.6738">1</text><!--link PropertiesConfigurationBuilder to PropertiesConfigurationFactory--><path d="M497,686.1101 C497,706.0361 497,729.7799 497,749.7719 " fill="none" id="PropertiesConfigurationBuilder-PropertiesConfigurationFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="497,762.9201,501,756.9201,497,750.9201,493,756.9201,497,762.9201" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="498" y="729.02">创建</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="488.3375" y="706.5438">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="488.125" y="751.7032">1</text><!--
@startuml
title 类图 

interface Builder<T> {
    T build();
}

interface Configuration {
}

abstract class AbstractConfiguration {
  - ConcurrentMap<String, LoggerConfig> loggerConfigs;
  - final WeakReference<LoggerContext> loggerContext;
  - final WatchManager watchManager;
  - final ConfigurationSource configurationSource;
  .. 子组件 ..
  - ConcurrentMap<String, Appender> appenders;
  - final ConcurrentMap<String, String> properties
  - final StrLookup tempLookup;
  - final StrSubstitutor subst;
}

class BuiltConfiguration {
    .. 配置中的各项组件 ..
    # Component rootComponent;
    - Component loggersComponent;
    - Component appendersComponent;
    - Component filtersComponent;
    - Component propertiesComponent;
    - Component customLevelsComponent;
    - Component scriptsComponent;
}

class PropertiesConfiguration {
}

interface ConfigurationBuilder {
  + ConfigurationBuilder<T> add(XxxComponentBuilder);
  + Configuration build(boolean);
}



class DefaultConfigurationBuilder {
    - Class<T> clazz;
    - ConfigurationSource source;
    - int monitorInterval;
    - Level level;
    - LoggerContext loggerContext;
    - String name;
    - Component root = new Component();
    .. root 的子组件 ..
    - Component loggers;
    - Component appenders;
    - Component filters;
    - Component properties;
    
    __ 向父组件添加子组件通用方法 __
    # ConfigurationBuilder<T> add(Component, ComponentBuilder<?>);
}

class PropertiesConfigurationBuilder {
  - ConfigurationBuilder<PropertiesConfiguration> builder;
  
  - XxxComponentBuilder createXxx(Properties);
  + PropertiesConfiguration build();
}

class PropertiesConfigurationFactory {
  + PropertiesConfiguration getConfiguration(LoggerContext, ConfigurationSource);
}

Builder <|-left- ConfigurationBuilder: 继承
Builder <|-down- PropertiesConfigurationBuilder: 实现
ConfigurationBuilder <|-up- DefaultConfigurationBuilder: 实现
ConfigurationBuilder "1" *-left- "1" Configuration: build()
Configuration <|-left- AbstractConfiguration: 实现
AbstractConfiguration <|-down- BuiltConfiguration: 继承
BuiltConfiguration <|-down- PropertiesConfiguration: 继承
PropertiesConfigurationBuilder  "1" *-left- "1"  ConfigurationBuilder: 包含
PropertiesConfigurationBuilder  "1" *-left- "1"  PropertiesConfiguration: 创建
PropertiesConfigurationFactory  "1" *-up- "1"  PropertiesConfigurationBuilder: 创建
@enduml

PlantUML version 1.2018.06(Mon May 21 10:34:53 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>